services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    volumes:
      - /opt/homelab/homepage/config:/app/config
    ports:
      - "3000:3000"
    environment:
      - HOMEPAGE_ALLOWED_HOSTS=homepage.pridebytes.io
    networks:
      homelab-network:
        ipv4_address: 172.18.0.3  # Unique IP for Homepage
    restart: always

  plex:
    image: plexinc/pms-docker:latest
    container_name: plex
    ports:
      - "32400:32400"
    volumes:
      - /homelab/plex/config:/config
      - /opt/homelab/plex/data/Movies:/movies
    environment:
      - PLEX_CLAIM=claim-dr9vNG7xsy3Rhfh9SQ3C
      - TZ=America/Denver    
    networks:
      homelab-network:
        ipv4_address: 172.18.0.4  # Unique IP for Plex
    restart: always

  ssh-gui:
    image: linuxserver/openssh-server
    container_name: ssh-gui
    ports:
      - "3001:3001"
    networks:
      homelab-network:
        ipv4_address: 172.18.0.5  # Unique IP for SSH GUI
    restart: always
    
  splash:
    build:
      context: ./splash  # Path to your Dockerfile (where both frontend and backend code reside)
    container_name: splash
    ports:
      - "5000:5000"  # API port for Flask
    volumes:
      - ./splash/backend:/app/backend  # Optional: bind mount for live development
      - ./splash/frontend/dist:/app/backend/frontend
    networks:
      homelab-network:
        ipv4_address: 172.18.0.6
    restart: always 
    

networks:
  homelab-network:
    driver: bridge
    ipam:
      config:
        - subnet: "172.18.0.0/16"
